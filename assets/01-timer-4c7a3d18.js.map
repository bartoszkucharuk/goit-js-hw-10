{"version":3,"file":"01-timer-4c7a3d18.js","sources":["../../src/js/01-timer.js"],"sourcesContent":["// importing calendar/date plugin\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n// importing pop-ups (toasting) plugin\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// making elements to handle with listeners by html's names\nconst elements = {\n    input: document.querySelector(\"#datetime-picker\"),\n    button: document.querySelector(\"button[data-start]\"),\n    day: document.querySelector(\"span[data-days]\"),\n    hour: document.querySelector(\"span[data-hours]\"),\n    minute: document.querySelector(\"span[data-minutes]\"),\n    second: document.querySelector(\"span[data-seconds]\")\n}\n\n// making start button disabled when no data is chosen\nlet userSelectedDate;\nelements.button.disabled = true;\n\n// options object for flatpickr plugin\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n// cooperate with izitoast plugin - pop-ups\n    onClose(selectedDates) {\n        const currentTime = Date.now();\n        if (selectedDates[0] <= currentTime) {\n            iziToast.error({\n                message: \"Please choose a date in the future\"\n            });\n            elements.button.disabled = true;\n        } else {\n            elements.button.disabled = false;\n            userSelectedDate = selectedDates[0];\n        }\n        return;\n    },\n};\n\nfunction runningCounter({ days, hours, minutes, seconds }) {\n    elements.day.textContent = `${days}`\n    elements.hour.textContent = `${hours}`\n    elements.minute.textContent = `${minutes}`\n    elements.second.textContent = `${seconds}`;\n}\n\nelements.button.addEventListener(\"click\", handlerStart);\n\nfunction handlerStart() {\n    const newInterval = setInterval(() => {\n        const currentTime = Date.now();\n        const countdown = userSelectedDate - currentTime;\n        if (countdown <= 0) {\n            clearInterval(newInterval);\n            elements.input.disabled = false;\n            elements.button.disabled = false;\n            return;\n        }\n        const { days, hours, minutes, seconds } = convertMs(countdown);\n        runningCounter({ days, hours, minutes, seconds });\n        elements.input.disabled = true;\n        elements.button.disabled = true;\n    }, 1000);\n}\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = addLeadingZero(Math.floor(ms / day));\n    const hours = addLeadingZero(Math.floor((ms % day) / hour));\n    const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n    const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\")\n}\n\n\nflatpickr(\"#datetime-picker\", options);"],"names":["elements","userSelectedDate","options","selectedDates","currentTime","iziToast","runningCounter","days","hours","minutes","seconds","handlerStart","newInterval","countdown","convertMs","ms","addLeadingZero","value","flatpickr"],"mappings":"gDASA,MAAMA,EAAW,CACb,MAAO,SAAS,cAAc,kBAAkB,EAChD,OAAQ,SAAS,cAAc,oBAAoB,EACnD,IAAK,SAAS,cAAc,iBAAiB,EAC7C,KAAM,SAAS,cAAc,kBAAkB,EAC/C,OAAQ,SAAS,cAAc,oBAAoB,EACnD,OAAQ,SAAS,cAAc,oBAAoB,CACvD,EAGA,IAAIC,EACJD,EAAS,OAAO,SAAW,GAG3B,MAAME,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACnB,MAAMC,EAAc,KAAK,MACrBD,EAAc,CAAC,GAAKC,GACpBC,EAAS,MAAM,CACX,QAAS,oCACzB,CAAa,EACDL,EAAS,OAAO,SAAW,KAE3BA,EAAS,OAAO,SAAW,GAC3BC,EAAmBE,EAAc,CAAC,EAGzC,CACL,EAEA,SAASG,EAAe,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACvDV,EAAS,IAAI,YAAc,GAAGO,CAAI,GAClCP,EAAS,KAAK,YAAc,GAAGQ,CAAK,GACpCR,EAAS,OAAO,YAAc,GAAGS,CAAO,GACxCT,EAAS,OAAO,YAAc,GAAGU,CAAO,EAC5C,CAEAV,EAAS,OAAO,iBAAiB,QAASW,CAAY,EAEtD,SAASA,GAAe,CACpB,MAAMC,EAAc,YAAY,IAAM,CAClC,MAAMR,EAAc,KAAK,MACnBS,EAAYZ,EAAmBG,EACrC,GAAIS,GAAa,EAAG,CAChB,cAAcD,CAAW,EACzBZ,EAAS,MAAM,SAAW,GAC1BA,EAAS,OAAO,SAAW,GAC3B,MACH,CACD,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYI,EAAUD,CAAS,EAC7DP,EAAe,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,EAChDV,EAAS,MAAM,SAAW,GAC1BA,EAAS,OAAO,SAAW,EAC9B,EAAE,GAAI,CACX,CAEA,SAASc,EAAUC,EAAI,CAMnB,MAAMR,EAAOS,EAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC1CP,EAAQQ,EAAe,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EACpDN,EAAUO,EAAe,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEL,EAAUM,EAAe,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASM,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAGAC,EAAU,mBAAoBhB,CAAO"}